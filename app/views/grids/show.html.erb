<div id="stage">
  <!-- The display: none, hides the grid until it's position has been set -->
  <canvas class="uk-animation-fade" id="grid" height="<%= @grid.height %>" width="<%= @grid.width %>" data-pixel-bits="<%= @grid.pixel_bits %>" data-id="<%= @grid.id %>" data-queue="<%= Oj.dump(@queue) %>" style="display: none;"></canvas>
</div>

<div class="cols-container">
  <!-- Colors are inserted through javascript -->
</div>

<div id="alpha-modal" uk-modal>
    <div class="uk-modal-dialog uk-modal-body">
        <button class="uk-modal-close-default" type="button" uk-close></button>
        <h2 class="uk-modal-title mb-3 border-bottom pb-2">Welcome to <strong>pixelGrid</strong></h2>
        <p>
          You are currently viewing an <mark style="color: blue;">alpha version</mark> of the pixelGrid.<br><br>

          The website is still being developed so please be bear with us as we are improving it every day. We will be relaunching the site in early October with a partnership with a well known charity and more features that we are sure you will love. If you are interested please sign up for an account now and we will be sure to contact you when we <mark style="color: blue;">officially launch in October.</mark><br><br>

          Together, we can build the bigger picture.
        </p>
    </div>
</div>

<script>
  <% if !current_user %>
    UIkit.modal(document.getElementById('alpha-modal')).show();
  <% end %>

  // There has to be a better place to put all this but
  // it's function and helpful for now.

  const canvas = document.getElementById('grid');
  const ctx = canvas.getContext('2d');

  let mouseX = null;
  let mouseY = null;

  // These are the 16 colours, defined here so they are globally accessible.
  const rgbas = {0: [255, 255, 255, 255],
                1: [87, 87, 87, 255],
                2: [173, 35, 35, 255],
                3: [42, 75, 215, 255],
                4: [29, 105, 20, 255],
                5: [129, 74, 25, 255],
                6: [129, 38, 192, 255],
                7: [160, 160, 160, 255],
                8: [129, 197, 122, 255],
                9: [157, 175, 255, 255],
                10: [41, 208, 208, 255],
                11: [255, 146, 51, 255],
                12: [255, 238, 51, 255],
                13: [233, 222, 187, 255],
                14: [255, 205, 243, 255],
                15: [0, 0, 0, 255]}

  // Starting colour
  let color = 'rgb(0, 0, 0)';

  let click = null;

  let currentHover = [];
  setTimeout(function(){
  document.querySelector("#grid").classList = "";
  document.querySelector("body").classList = "";
 }, 2000);
</script>
<%= render 'shared/dashboard' %>
