<div class="navbar navbar-expand-sm navbar-light navbar-lewagon">

  <div class="d-flex align-items-center">
    <%= link_to "/", class: "navbar-brand" do %>
      <%= image_tag('logo.png')  %>
    <% end %>

    <p class="mb-0">
      <i style="color: green" class="far fa-dot-circle"></i> <span id="user-count">1</span> currently online
    </p>
  </div>

  <button class="navbar-toggler" type="button" uk-toggle="target: #offcanvas-flip" >
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <% if (user_signed_in?) %>
        <% if current_user.admin %>
          <li class="nav-item">
            <a href="#" class="nav-link credits">Pixels: <%= current_user.pixel_credits %></a>
          </li>
          <li>
            <button id="dashboard" class="uk-button uk-button-default" type="button" uk-toggle="target: #offcanvas-flip">Dashboard</button>
          </li>
        <% end %>
        <li class="nav-item" uk-tooltip="title: Profile coming soon!; pos: bottom">
          <%= image_tag "logo.png", class: "avatar", id: "navbarDropdown"%>
        </li>
      <% else %>
        <li>
          <button id="dashboard" class="uk-button uk-button-primary" type="button" uk-toggle="target: #offcanvas-flip">Get Started</button>
          <div id="offcanvas-flip" uk-offcanvas="flip: true; overlay: true">
            <div class="uk-offcanvas-bar">
              <button class="uk-offcanvas-close" type="button" uk-close></button>

              <h3>Sign up</h3>

              <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
                <%= devise_error_messages! %>
                <%= f.email_field :email, class: "uk-input", placeholder: "Email" %>
                <%= f.password_field :password, class: "uk-input", placeholder: "Password" %>
                <%= f.password_field :password_confirmation, class: "uk-input", placeholder: "Confirm password" %>
                <%= f.submit "Sign up", class: "btn btn-flat", style: "width: 100%; background: #dee2e6; margin-bottom: 12px; margin: 6px 0px 0px 0px;" %>
              <% end %>

              <br>
              <center> <h5>Or</h5> </center>

              <h3>Sign In</h3>

              <%= simple_form_for(:user, :url => session_path(:user)) do |f| %>
                <%= f.text_field :email, class: "uk-input", placeholder: "Email" %>
                <%= f.password_field :password, class: "uk-input", placeholder: "Password" %>
                <br>
                <%= f.check_box :remember_me %>
                <%= f.label :remember_me %>
                <%= f.submit 'Sign in', class: "btn btn-flat", style: "width: 100%; background: #dee2e6; margin-bottom: 12px;" %>
                <br>
                <%= link_to "Forgot your password?", new_password_path(:user) %>
                <hr>
              <% end %>
            </div>
          </div>
        </li>
      <% end %>
    </ul>
  </div>
</div>

